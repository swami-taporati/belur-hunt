<!DOCTYPE html>
<html>
<head>
    <title>Neon Jump: Tournament</title>
    <style>
        body { margin: 0; background: #0a0a0a; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; color: white; font-family: 'Segoe UI', sans-serif; }
        canvas { border: 4px solid #7000ff; background: #000; box-shadow: 0 0 40px rgba(112, 0, 255, 0.4); cursor: pointer; }
        .tournament-ui { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #7000ff; min-width: 150px; }
        .stat-bar { width: 800px; display: flex; justify-content: space-between; margin-bottom: 10px; }
        #overlay { position: absolute; background: rgba(0,0,0,0.8); width: 800px; height: 250px; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }
        input { padding: 8px; border-radius: 4px; border: none; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #7000ff; color: white; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div class="stat-bar">
        <span>PLAYER: <strong id="nameTag">Guest</strong></span>
        <span style="color: #00ffcc;">TOURNAMENT SEED: #GLOB-2025</span>
    </div>

    <div id="overlay">
        <h2>ENTER TOURNAMENT</h2>
        <input type="text" id="playerName" placeholder="Enter Nickname..." maxlength="10">
        <button onclick="startTournament()">JOIN MATCH</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div class="tournament-ui">
        <h4 style="margin:0 0 10px 0">LEADERBOARD</h4>
        <div id="leaderboardList" style="font-size: 0.8em; color: #aaa;">
            1. ACE - 2450<br>
            2. ZEUS - 1820<br>
            3. TRON - 1200
        </div>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const nameTag = document.getElementById("nameTag");
        const overlay = document.getElementById("overlay");
        
        canvas.width = 800; canvas.height = 250;
        let gameActive = false;
        let score = 0;
        let frame = 0;
        let obstacles = [];
        let gameSpeed = 6;

        // SEED-BASED RANDOMNESS (Pseudo-random)
        // This ensures every player gets the same obstacles for the tournament
        let seed = 12345; 
        function seededRandom() {
            seed = (seed * 9301 + 49297) % 233280;
            return seed / 233280;
        }

        function startTournament() {
            const name = document.getElementById("playerName").value;
            if(!name) return alert("Enter a name!");
            nameTag.innerText = name.toUpperCase();
            overlay.style.display = "none";
            gameActive = true;
            resetGame();
        }

        function spawnObstacle() {
            if (frame % 80 === 0) {
                // Use seededRandom instead of Math.random
                let height = 30 + seededRandom() * 60;
                obstacles.push({ x: canvas.width, width: 20, height: height, passed: false });
            }
        }

        function update() {
            if (!gameActive) return;
            gameSpeed += 0.001;
            
            // Player logic (Simplified for this example)
            player.dy += player.gravity;
            player.y += player.dy;
            if (player.y + 30 > canvas.height) { player.y = canvas.height - 30; player.dy = 0; player.grounded = true; }

            obstacles.forEach((obs, i) => {
                obs.x -= gameSpeed;
                if (!obs.passed && obs.x < 80) { score += 10; obs.passed = true; }
                if (80 < obs.x + obs.width && 80 + 30 > obs.x && player.y + 30 > canvas.height - obs.height) {
                    gameActive = false;
                    overlay.style.display = "flex";
                    document.querySelector("h2").innerText = "MATCH OVER: " + score;
                    updateLeaderboard(nameTag.innerText, score);
                }
            });
            frame++;
            spawnObstacle();
        }

        function updateLeaderboard(name, finalScore) {
            // In a real tournament, you would send 'finalScore' to a database here.
            // For now, we update the local UI list.
            const list = document.getElementById("leaderboardList");
            list.innerHTML = `1. ${name} - ${finalScore}<br>` + list.innerHTML;
        }

        const player = { y: 200, dy: 0, gravity: 0.8, grounded: false };
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#7000ff";
            ctx.fillRect(80, player.y, 30, 30); // Player
            
            ctx.fillStyle = "#ff00cc";
            obstacles.forEach(obs => ctx.fillRect(obs.x, canvas.height - obs.height, obs.width, obs.height));
            
            ctx.fillStyle = "white";
            ctx.fillText("SCORE: " + score, 20, 30);
            
            update();
            requestAnimationFrame(draw);
        }

        window.addEventListener("keydown", (e) => {
            if (e.code === "Space" && player.grounded) { player.dy = -12; player.grounded = false; }
        });

        draw();

        function resetGame() {
            score = 0; frame = 0; obstacles = []; gameSpeed = 6; seed = 12345;
        }
    </script>
</body>
</html>
