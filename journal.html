<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belur Mission: The Hoysala Quest</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }
        .container {
            max-width: 650px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        .status-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #fff3cd;
            border-bottom: 2px solid #ffeeba;
            padding: 10px;
            text-align: center;
        }
        #rankText { font-weight: bold; color: #856404; font-size: 1.1em; }
        .progress-bg { background: #e9ecef; height: 12px; border-radius: 6px; margin-top: 8px; overflow: hidden; }
        #progressFill { background: #28a745; height: 100%; width: 0%; transition: 0.5s; }
        
        .content { padding: 20px; }
        .zone-header { 
            background: #343a40; color: white; padding: 8px 15px; 
            border-radius: 5px; margin: 20px 0 10px 0; font-size: 0.9em; text-transform: uppercase;
        }
        .item {
            background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px;
            padding: 15px; margin-bottom: 12px; cursor: pointer; transition: 0.2s;
        }
        .item.completed { background: #e8f5e9; border-color: #28a745; }
        .item-main { display: flex; align-items: center; gap: 12px; font-weight: 600; }
        .checkbox { width: 24px; height: 24px; border: 2px solid #ccc; border-radius: 6px; background: white; flex-shrink: 0; }
        .completed .checkbox { background: #28a745; border-color: #28a745; position: relative; }
        .completed .checkbox::after { content: '‚úì'; color: white; position: absolute; left: 5px; top: -1px; }
        
        .loc-hint { font-size: 0.8em; color: #6c757d; margin-top: 5px; font-style: italic; }
        
        .input-group { margin-bottom: 15px; }
        input[type="text"], textarea {
            width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; margin-top: 5px;
        }
        .submit-btn {
            width: 100%; padding: 20px; background: #764ba2; color: white;
            border: none; border-radius: 12px; font-size: 1.2em; font-weight: bold;
            margin-top: 20px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Belur Quest</h1>
        <p>Archaeological Expedition</p>
    </div>

    <div class="status-bar">
        <div id="rankText">Rank: Junior Scout</div>
        <div class="progress-bg"><div id="progressFill"></div></div>
    </div>

    <div class="content">
        <div class="input-group">
            <input type="text" id="teamName" placeholder="Team Name">
            <input type="text" id="teacher" placeholder="Teacher In-Charge">
            <textarea id="members" placeholder="Team Members..." rows="2"></textarea>
        </div>

        <div id="missionList"></div>

        <button class="submit-btn" onclick="submitResults()">üì§ Dispatch Report</button>
        <button onclick="resetApp()" style="width:100%; background:none; border:none; color:#999; margin-top:15px; cursor:pointer; font-size:0.8em;">Reset Mission</button>
    </div>
</div>

<script>
    const missionData = [
        { zone: "Zone 1: Entrance & Courtyard", items: [
            { id: 0, name: "The Royal Emblem", hint: "Look for Sala slaying the tiger near the main steps." },
            { id: 1, name: "Gravity Pillar", hint: "The tall lamp pillar that stands by its own weight." },
            { id: 2, name: "Step Well (Pushkarni)", hint: "The geometric water tank in the corner of the compound." }
        ]},
        { zone: "Zone 2: Temple Base (Lower Friezes)", items: [
            { id: 3, name: "Elephant Frieze", hint: "The very bottom row. How many look exactly the same?" },
            { id: 4, name: "Charging Lions", hint: "The second row of animals above the elephants." },
            { id: 5, name: "Horse Frieze", hint: "The third row, representing speed and power." },
            { id: 6, name: "Mythical Makara", hint: "A creature with an elephant trunk and peacock tail." },
            { id: 7, name: "Smallest Ganesha", hint: "Hidden tiny carving near the southern entrance base." }
        ]},
        { zone: "Zone 3: Outer Walls (The Masterpieces)", items: [
            { id: 8, name: "Darpanasundari", hint: "The lady with the mirror. High up as a bracket figure." },
            { id: 9, name: "The Drummer", hint: "A stone lady playing a traditional percussion instrument." },
            { id: 10, name: "Monkey & Scorpion", hint: "A lady troubled by a monkey; a scorpion is near her feet." },
            { id: 11, name: "The Huntress", hint: "A figure aiming a bow and arrow high on the wall." },
            { id: 12, name: "Shuko-Bhashini", hint: "Look for a lady talking to a parrot on her hand." },
            { id: 13, name: "Vishnu's Avatars", hint: "Look for Narasimha (Lion-man) on the wall panels." },
            { id: 14, name: "Mohini Figure", hint: "The beautiful female avatar of Vishnu." }
        ]},
        { zone: "Zone 4: Inside the Hall (Dark Secrets)", items: [
            { id: 15, name: "Narasimha Pillar", hint: "Intricate pillar inside. It was said to rotate!" },
            { id: 16, name: "Ceiling Lotus", hint: "Look straight up at the center of the interior hall." },
            { id: 17, name: "Dancing Floor", hint: "The polished circular stone where the Queen danced." },
            { id: 18, name: "Stone Lattice", hint: "The carved windows that let light into the hall." },
            { id: 19, name: "Artist Signature", hint: "Old Kannada writing at the base of a statue." }
        ]}
    ];

    let state = JSON.parse(localStorage.getItem('belurExpedition') || '{}');

    function renderList() {
        const list = document.getElementById('missionList');
        list.innerHTML = '';
        let count = 0;

        missionData.forEach(zone => {
            const zHeader = document.createElement('div');
            zHeader.className = 'zone-header';
            zHeader.innerText = zone.zone;
            list.appendChild(zHeader);

            zone.items.forEach(item => {
                const isDone = state[item.id];
                if(isDone) count++;
                const div = document.createElement('div');
                div.className = `item ${isDone ? 'completed' : ''}`;
                div.onclick = () => toggle(item.id);
                div.innerHTML = `
                    <div class="item-main"><div class="checkbox"></div><span>${item.name}</span></div>
                    <div class="loc-hint">üìç ${item.hint}</div>
                `;
                list.appendChild(div);
            });
        });
        updateRank(count);
    }

    function toggle(id) {
        state[id] = !state[id];
        localStorage.setItem('belurExpedition', JSON.stringify(state));
        renderList();
    }

    function updateRank(count) {
        const fill = document.getElementById('progressFill');
        const rText = document.getElementById('rankText');
        fill.style.width = (count / 20 * 100) + '%';
        
        let rank = "Junior Scout";
        if(count >= 20) rank = "üèÜ Legend of the Hoysala";
        else if(count >= 15) rank = "Royal Historian";
        else if(count >= 10) rank = "Expert Archaeologist";
        else if(count >= 5) rank = "Senior Scout";
        
        rText.innerText = `Rank: ${rank} (${count}/20)`;
    }

    function submitResults() {
        const count = Object.keys(state).filter(k => state[k] === true).length;
        const text = `üèÜ MISSION COMPLETE üèÜ\nTeam: ${document.getElementById('teamName').value}\nTeacher: ${document.getElementById('teacher').value}\nRank: ${document.getElementById('rankText').innerText}\nItems Found: ${count}/20`;
        navigator.share ? navigator.share({text: text}) : alert("Copied to clipboard!\n\n" + text);
    }

    function resetApp() { if(confirm("Start new mission?")) { localStorage.clear(); location.reload(); } }

    ['teamName', 'teacher', 'members'].forEach(id => {
        document.getElementById(id).value = state[id] || '';
        document.getElementById(id).oninput = (e) => { state[id] = e.target.value; localStorage.setItem('belurExpedition', JSON.stringify(state)); };
    });

    renderList();
</script>
</body>
</html>
