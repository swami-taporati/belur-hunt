<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belur Scavenger Hunt + Photo Pro</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 15px; }
        .item { background: white; margin-bottom: 10px; padding: 15px; border-radius: 12px; border-left: 5px solid #ccc; transition: 0.3s; }
        .item.completed { border-left-color: #4CAF50; background: #f9fff9; }
        .camera-btn { 
            background: #007bff; color: white; border: none; padding: 10px; 
            border-radius: 8px; margin-top: 10px; cursor: pointer; display: flex; align-items: center; gap: 8px;
        }
        .photo-status { color: #4CAF50; font-size: 0.8em; font-weight: bold; display: none; margin-top: 5px; }
        .item.completed .photo-status { display: block; }
        .hidden-input { display: none; }
        #progressBar { height: 20px; background: #ddd; border-radius: 10px; overflow: hidden; margin-bottom: 20px; }
        #progressFill { height: 100%; background: #4CAF50; width: 0%; transition: 0.5s; }
        .submit-btn { width: 100%; padding: 20px; background: #764ba2; color: white; border: none; border-radius: 12px; font-size: 1.2em; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

    <h2>üèõÔ∏è Belur Mission</h2>
    <div id="progressBar"><div id="progressFill"></div></div>

    <div id="setup">
        <input type="text" id="teamName" placeholder="Team Name" style="width:100%; padding:10px; margin-bottom:5px;">
        <input type="text" id="teacher" placeholder="Teacher In-Charge" style="width:100%; padding:10px; margin-bottom:20px;">
    </div>

    <div id="missionList">
        </div>

    <button class="submit-btn" onclick="submitResults()">üì§ Submit Final Report</button>

    <script>
        const missionItems = [
            "The Royal Emblem", "Gravity Pillar", "Charging Lions", "Elephant Frieze", 
            "Darpanasundari", "The Drummer", "Monkey & Scorpion", "Rotating Pillar",
            "Ceiling Lotus", "Stone Lattice", "Step Well", "Horse Frieze", 
            "Mythical Makara", "Smallest Ganesha", "The Huntress", "Shuko-Bhashini",
            "Dancing Floor", "Vishnu Avatar", "Mohini Figure", "Deepa Stambha"
        ];

        let savedState = JSON.parse(localStorage.getItem('belurPhotoHunt') || '{}');
        const container = document.getElementById('missionList');

        missionItems.forEach((name, index) => {
            const div = document.createElement('div');
            div.className = `item ${savedState[index] ? 'completed' : ''}`;
            div.id = `item-${index}`;
            div.innerHTML = `
                <strong>${index + 1}. ${name}</strong>
                <div class="photo-status">‚úÖ Photo Captured</div>
                <input type="file" accept="image/*" capture="camera" class="hidden-input" id="file-${index}" onchange="handlePhoto(${index})">
                <button class="camera-btn" onclick="document.getElementById('file-${index}').click()">
                    üì∑ Take Photo
                </button>
            `;
            container.appendChild(div);
        });

        function handlePhoto(index) {
            savedState[index] = true;
            document.getElementById(`item-${index}`).classList.add('completed');
            localStorage.setItem('belurPhotoHunt', JSON.stringify(savedState));
            updateProgress();
        }

        function updateProgress() {
            const completed = Object.keys(savedState).filter(k => !isNaN(k)).length;
            const percent = (completed / 20) * 100;
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function submitResults() {
            const team = document.getElementById('teamName').value || "Team";
            const teacher = document.getElementById('teacher').value || "Teacher";
            const completedCount = Object.keys(savedState).filter(k => !isNaN(k)).length;
            
            const summary = `üèÜ PHOTO MISSION COMPLETE üèÜ\nTeam: ${team}\nTeacher: ${teacher}\nScore: ${completedCount}/20\n\nNote: All photos are saved on the student's phone gallery.`;
            
            if (navigator.share) {
                navigator.share({ title: 'Belur Report', text: summary });
            } else {
                alert("Report copied! Show your phone gallery to the teacher.\n\n" + summary);
            }
        }
        
        updateProgress();
    </script>
</body>
</html>
